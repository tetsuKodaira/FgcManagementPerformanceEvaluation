{"Columns":[{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"bigint","MaxLength":-1,"Name":"evaluation_targeted_employee_id","ColumnType":"System.Int64, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"employee_code","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"employee_z_code","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"employee_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"evaluation_commitee_id","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"evaluation_commitee_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl04","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nchar","MaxLength":-1,"Name":"department_name_lvl04","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl05","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nchar","MaxLength":-1,"Name":"department_name_lvl05","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"course_id","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"course_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"int","MaxLength":-1,"Name":"is_trial_categoly_id","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"is_trial_categoly_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"int","MaxLength":-1,"Name":"job_grade_id","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"job_grade_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"job_group_id","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"job_group_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"datetime2","MaxLength":-1,"Name":"joined_date","ColumnType":"System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"int","MaxLength":-1,"Name":"financial_year","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"course_id_from_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"course_name_for_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"job_grade_id_from_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"job_grade_name_from_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"job_group_id_from_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"job_group_name_from_table","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"approximate_grade_for_assignment_task","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"approximate_grade_for_process","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"assignment_task_self_assesment_point_figure","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"assignment_task_assesment_point_figure","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"assignment_task_self_assesment_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"assignment_task_assesment_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"process_element_self_assesment_point_figure","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"process_element_assesment_point_figure","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"process_element_self_assesment_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"process_element_assesment_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"final_evaluation_task_point","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_task_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"final_evaluation_process_point","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_process_grade","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_task_grade_1year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_task_grade_2year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_task_grade_3year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_process_grade_1year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_process_grade_2year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"final_evaluation_process_grade_3year_ago","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"is_from_excel","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"is_carrer_in_this_year","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"is_rest","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"}],"ExternalDatabaseInfo":{"SourceConnectString":"Data Source=NTVMDTEST-006\\SQLEXPRESS;Initial Catalog=ManagementEvaluationDB;Persist Security Info=True;User ID=kodaira;Password=kodaira","CreateViewSql":"\r\nSELECT\r\n\tevaluation_targeted_employee.evaluation_targeted_employee_id,\r\n\tevaluation_targeted_employee.employee_code,\r\n\tevaluation_targeted_employee.employee_z_code,\r\n\tevaluation_targeted_employee.employee_name,\r\n\tevaluation_targeted_employee.evaluation_commitee_id,\r\n\tevaluation_targeted_employee.evaluation_commitee_name,\r\n\tevaluation_targeted_employee.department_code_lvl04,\r\n\tevaluation_targeted_employee.department_name_lvl04,\r\n\tevaluation_targeted_employee.department_code_lvl05,\r\n\tevaluation_targeted_employee.department_name_lvl05,\r\n\tcompany_data_employee.course_id,\r\n\tcompany_data_employee.course_name,\r\n\tcompany_data_employee.is_trial_categoly_id,\r\n\tcompany_data_employee.is_trial_categoly_name,\r\n\tcompany_data_employee.job_grade_id,\r\n\tcompany_data_employee.job_grade_name,\r\n\tcompany_data_employee.job_group_id,\r\n\tcompany_data_employee.job_group_name,\r\n\tcompany_data_employee.joined_date,\r\n\tlatest_evaluation_targeted_list.financial_year,\r\n\tmanagement_basicinformation.management_course_id AS course_id_from_table,\r\n\tmanagement_basicinformation.management_corse_name AS course_name_for_table,\r\n\tmanagement_basicinformation.job_grade_id AS job_grade_id_from_table,\r\n\tmanagement_basicinformation.job_grade_name AS job_grade_name_from_table,\r\n\tmanagement_basicinformation.job_group_id AS job_group_id_from_table,\r\n\tmanagement_basicinformation.job_group_name AS job_group_name_from_table,\r\n\tapproximate_evaluation.approximate_grade AS approximate_grade_for_assignment_task,--諸事情により同じ値で2列表示\r\n\tapproximate_evaluation.approximate_grade AS approximate_grade_for_process,--諸事情により同じ値で2列表示\r\n\tmanagement_basicinformation.assignment_task_self_assesment_point_figure,\r\n\tmanagement_basicinformation.assignment_task_assesment_point_figure,\r\n\tmanagement_basicinformation.assignment_task_self_assesment_grade,\r\n\tmanagement_basicinformation.assignment_task_assesment_grade,\r\n\tmanagement_basicinformation.process_element_self_assesment_point_figure,\r\n\tmanagement_basicinformation.process_element_assesment_point_figure,\r\n\tmanagement_basicinformation.process_element_self_assesment_grade,\r\n\tmanagement_basicinformation.process_element_assesment_grade,\r\n\tevaluation_result.final_evaluation_task_point,\r\n\tevaluation_result.final_evaluation_task_grade,\r\n\tevaluation_result.final_evaluation_process_point,\r\n\tevaluation_result.final_evaluation_process_grade,\r\n\tLAG(evaluation_result.final_evaluation_task_grade, 1) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_task_grade_1year_ago,\r\n   LAG(evaluation_result.final_evaluation_task_grade, 2) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_task_grade_2year_ago,\r\n   LAG(evaluation_result.final_evaluation_task_grade, 3) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_task_grade_3year_ago,\r\n\tLAG(evaluation_result.final_evaluation_process_grade, 1) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_process_grade_1year_ago,\r\n   LAG(evaluation_result.final_evaluation_process_grade, 2) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_process_grade_2year_ago,\r\n   LAG(evaluation_result.final_evaluation_process_grade, 3) OVER (PARTITION BY evaluation_targeted_employee.employee_code ORDER BY latest_evaluation_targeted_list.financial_year) AS final_evaluation_process_grade_3year_ago,\r\n   management_basicinformation.is_from_excel,\r\n   approximate_evaluation.is_carrer_in_this_year,\r\n   approximate_evaluation.is_rest\r\nFROM\r\n\tT_EvaluationTargetedEmployees AS evaluation_targeted_employee\r\nINNER JOIN\r\n\t(SELECT\r\n\t\t\tevaluation_targeted_list_id,\r\n\t\t\tfinancial_year\r\n\t\tFROM\r\n\t\t\tT_EvaluationTagetedLists\r\n\t\tWHERE is_latest = 1--最新版のみに絞り込み\r\n\t) AS latest_evaluation_targeted_list\r\n\tON evaluation_targeted_employee.evaluation_targeted_list_id = latest_evaluation_targeted_list.evaluation_targeted_list_id\r\nINNER JOIN\r\n\tT_CompanyDataLists AS company_data_list\r\n\tON latest_evaluation_targeted_list.evaluation_targeted_list_id = company_data_list.evaluation_targeted_list_id\r\nINNER JOIN\r\n\tT_CompanyDataEmployees AS company_data_employee\r\n\tON evaluation_targeted_employee.employee_code = company_data_employee.employee_code\r\n\tAND company_data_list.company_data_list_id = company_data_employee.company_data_list_id\r\nINNER JOIN\r\n\tT_ManagementEvaluationResults\t AS evaluation_result\r\n\tON evaluation_targeted_employee.evaluation_targeted_employee_id = evaluation_result.evaluation_targeted_employee_id\r\nLEFT OUTER JOIN--業績評価表が存在しない社員もいるので左外部にする\r\n\t(SELECT\r\n\t\t\t\tmanagement_basicinformation.project_id,\r\n\t\t\t\tjob_grade.job_grade_id,\r\n\t\t\t\tjob_grade.job_grade_name,\r\n\t\t\t\tjob_group.job_group_id,\r\n\t\t\t\tjob_group.job_group_name,\r\n\t\t\t\tmanagement_course.management_course_id,\r\n\t\t\t\tmanagement_course.management_corse_name,\r\n\t\t\t\tassignment_task.self_assesment_point_figure AS assignment_task_self_assesment_point_figure,\r\n\t\t\t\tassignment_task.assesment_point_figure AS assignment_task_assesment_point_figure,\r\n\t\t\t\tprocess_element.self_assesment_point_figure AS process_element_self_assesment_point_figure,\r\n\t\t\t\tprocess_element.assesment_point_figure AS process_element_assesment_point_figure,\r\n\t\t\t\tassignment_task_self_assesment_grade.assignment_task_self_assesment_grade,\r\n\t\t\t\tassignment_task_assesment_grade.assignment_task_assesment_grade,\r\n\t\t\t\tprocess_element_self_assesment_grade.process_element_self_assesment_grade,\r\n\t\t\t\tprocess_element_assesment_grade.process_element_assesment_grade,\r\n\t\t\t\tbasicinformation.is_from_excel\r\n\t\t\tFROM\r\n\t\t\t\tT_BasicInformation AS basicinformation\r\n\t\t\tINNER JOIN\r\n\t\t\t\tT_ManagementBasicInformation AS management_basicinformation\r\n\t\t\t\tON basicinformation.project_id = management_basicinformation.project_id\r\n\t\t\tINNER JOIN\r\n\t\t\t\tM_JobGrades AS job_grade\r\n\t\t\t\tON management_basicinformation.job_grade_id = job_grade.job_grade_id\r\n\t\t\tINNER JOIN\r\n\t\t\t\tM_JobGroups AS job_group\r\n\t\t\t\tON management_basicinformation.job_group_id = job_group.job_group_id\r\n\t\t\tINNER JOIN\r\n\t\t\t\tM_ManagementCourses AS management_course\r\n\t\t\t\tON management_basicinformation.management_course_id = management_course.management_course_id\r\n\t\t\tLEFT OUTER JOIN\r\n\t\t\t\t(SELECT\r\n\t\t\t\t\t\tproject_id,\r\n\t\t\t\t\t\tAVG(assignment_task.self_assesment_point_figure) AS self_assesment_point_figure,\r\n\t\t\t\t\t\tAVG(assignment_task.self_assesment_point_figure) AS assesment_point_figure\r\n\t\t\t\t\tFROM\r\n\t\t\t\t\t\tT_ManagementAssignmentTasks AS assignment_task\r\n\t\t\t\t\tWHERE status_id >0 --中止を除く\r\n\t\t\t\t\tGROUP BY project_id\r\n\t\t\t\t) AS assignment_task\r\n\t\t\t\tON management_basicinformation.project_id = assignment_task.project_id\r\n\t\t\t\tCROSS APPLY\r\n\t\t\t\t\t(SELECT TOP 1 \r\n\t\t\t\t\t\t\tgrade AS assignment_task_assesment_grade\r\n\t\t\t\t\t\tFROM\r\n\t\t\t\t\t\t\tM_GradeThresholdFigureRelations AS grade_threshold_figure_relation\r\n\t\t\t\t\t\tWHERE threshold_figure <= assignment_task.assesment_point_figure\r\n\t\t\t\t\t\tORDER BY threshold_figure DESC\r\n\t\t\t\t\t) AS assignment_task_assesment_grade\r\n\t\t\t\tCROSS APPLY\r\n\t\t\t\t\t(SELECT TOP 1 \r\n\t\t\t\t\t\t\tgrade AS assignment_task_self_assesment_grade\r\n\t\t\t\t\t\tFROM\r\n\t\t\t\t\t\t\tM_GradeThresholdFigureRelations AS grade_threshold_figure_relation\r\n\t\t\t\t\t\tWHERE threshold_figure <= assignment_task.self_assesment_point_figure\r\n\t\t\t\t\t\tORDER BY threshold_figure DESC\r\n\t\t\t\t\t) AS assignment_task_self_assesment_grade\r\n\t\t\tLEFT OUTER JOIN\r\n\t\t\t\t(SELECT\r\n\t\t\t\t\t\tproject_id,\r\n\t\t\t\t\t\tAVG(process_element.self_assesment_point) AS self_assesment_point_figure,\r\n\t\t\t\t\t\tAVG(process_element.assesment_point) AS assesment_point_figure\r\n\t\t\t\t\tFROM\r\n\t\t\t\t\t\tT_ManagementProcessElements AS process_element\r\n\t\t\t\t\tGROUP BY project_id\r\n\t\t\t\t) AS process_element\r\n\t\t\t\tON management_basicinformation.project_id = process_element.project_id\r\n\t\t\t\tCROSS APPLY\r\n\t\t\t\t\t(SELECT TOP 1 \r\n\t\t\t\t\t\t\tgrade AS process_element_assesment_grade\r\n\t\t\t\t\t\tFROM\r\n\t\t\t\t\t\t\tM_GradeThresholdFigureRelations AS grade_threshold_figure_relation\r\n\t\t\t\t\t\tWHERE threshold_figure <= process_element.assesment_point_figure\r\n\t\t\t\t\t\tORDER BY threshold_figure DESC\r\n\t\t\t\t\t) AS process_element_assesment_grade\r\n\t\t\t\tCROSS APPLY\r\n\t\t\t\t\t(SELECT TOP 1 \r\n\t\t\t\t\t\t\tgrade AS process_element_self_assesment_grade\r\n\t\t\t\t\t\tFROM\r\n\t\t\t\t\t\t\tM_GradeThresholdFigureRelations AS grade_threshold_figure_relation\r\n\t\t\t\t\t\tWHERE threshold_figure <= process_element.self_assesment_point_figure\r\n\t\t\t\t\t\tORDER BY threshold_figure DESC\r\n\t\t\t\t\t) AS process_element_self_assesment_grade\r\n\t) AS management_basicinformation\r\n\tON evaluation_result.project_id = management_basicinformation.project_id\r\nLEFT OUTER JOIN\r\n\t(SELECT\r\n\t\t\tevaluation_targeted_list_id,\r\n\t\t\temployee_code,\r\n\t\t\tapproximate_grade,\r\n\t\t\tis_rest,\r\n\t\t\tis_carrer_in_this_year\r\n\t\tFROM \r\n\t\t\tT_ApproximateEvaluationLists AS approximate_evaluation_list\r\n\t\tINNER JOIN\r\n\t\t\tT_ApproximateEvaluationEmployees AS approximate_evaluation_employee\r\n\t\t\tON approximate_evaluation_list.approximate_evaluation_list_id = approximate_evaluation_employee.approximate_evaluation_list_id\r\n\t\tWHERE is_latest = 1\r\n\t) AS approximate_evaluation\r\n\tON evaluation_targeted_employee.evaluation_targeted_list_id = approximate_evaluation.evaluation_targeted_list_id\r\n\tAND evaluation_targeted_employee.employee_code = approximate_evaluation.employee_code\r\n\r\n","SourceTableName":"V_EvaluationTargetedEmployees","SourceTableSchema":"dbo","DataBaseType":1,"ViewInfo":{"ViewName":"V_EvaluationTargetedEmployees","IsUpdatable":true,"QueryColumns":["evaluation_targeted_employee_id"]},"UserSetQueryColumns":["evaluation_targeted_employee_id"]},"Name":"V_EvaluationTargetedEmployees","Relations":[]}