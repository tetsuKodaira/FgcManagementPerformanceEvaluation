{"Columns":[{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","Required":true,"DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl00","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl00","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl01","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl01","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl02","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl02","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl03","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl03","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl04","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl04","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl05","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl05","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"is_vaild","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"department_code_lvl06","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"department_name_lvl06","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"division_code","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"varchar","MaxLength":-1,"Name":"division_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"level_no_lvl00","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"int","MaxLength":-1,"Name":"evaluation_commitee_id","ColumnType":"System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"},{"$type":"Forguncy.Model.Tables.BindingColumn, ServerDesignerCommon","DatabaseColumnType":"nvarchar","MaxLength":-1,"Name":"evaluation_commitee_name","ColumnType":"System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"}],"ExternalDatabaseInfo":{"SourceConnectString":"Data Source=NTVMDTEST-006\\SQLEXPRESS;Initial Catalog=ManagementEvaluationDB;Persist Security Info=True;User ID=kodaira;Password=kodaira","CreateViewSql":"--結合条件の都合上、部署コード00が一意にならない場合があるのでグループバイで逃げる\r\nSELECT\r\n\tdepartment_code_lvl00,\r\n\tMAX(department_name_lvl00) AS department_name_lvl00,\r\n\tMAX(department_code_lvl01) AS department_code_lvl01,\r\n\tMAX(department_name_lvl01) AS department_name_lvl01,\r\n\tMAX(department_code_lvl02) AS department_code_lvl02,\r\n\tMAX(department_name_lvl02) AS department_name_lvl02,\r\n\tMAX(department_code_lvl03) AS department_code_lvl03,\r\n\tMAX(department_name_lvl03) AS department_name_lvl03,\r\n\tMAX(department_code_lvl04) AS department_code_lvl04,\r\n\tMAX(department_name_lvl04) AS department_name_lvl04,\r\n\tMAX(department_code_lvl05) AS department_code_lvl05, \r\n\tMAX(department_name_lvl05) AS department_name_lvl05,\r\n\tMAX(is_vaild) AS is_vaild,\r\n    MAX(department_code_lvl06) AS department_code_lvl06,\r\n    MAX(department_name_lvl06) AS department_name_lvl06,\r\n    MAX(division_code) AS division_code,\r\n    MAX(division_name) AS division_name,\r\n    MAX(level_no_lvl00) AS level_no_lvl00,\r\n    MAX(evaluation_commitee_id) AS evaluation_commitee_id,\r\n    MAX(evaluation_commitee_name) AS evaluation_commitee_name\r\nFROM\r\n\t(SELECT\r\n\t\tdepartment.*,\r\n\t\tassigned_department.evaluation_commitee_id,\r\n\t\tassigned_department.evaluation_commitee_name\r\n\tFROM\r\n\t\t[rds-commondb-poc-zeon-db-001.cjzyjlprofpu.ap-northeast-1.rds.amazonaws.com].[Dev_L_USER_MST].[dbo].[lum_view_departments_duplicated] AS department\r\n\tLEFT OUTER JOIN --評価部会に設定されている部署とその階層情報を取得\r\n\t\t(SELECT\r\n\t\t\tdepartment.department_code_lvl00,\r\n\t\t\tevaluation_commitee.evaluation_commitee_id,\r\n\t\t\tevaluation_commitee.evaluation_commitee_name,\r\n\t\t\tdepartment.level_no_lvl00\r\n\t\tFROM \r\n\t\t\t\tM_evaluation_commitee_relations AS evaluation_commitee_department\r\n\t\t\tINNER JOIN\r\n\t\t\t\t[rds-commondb-poc-zeon-db-001.cjzyjlprofpu.ap-northeast-1.rds.amazonaws.com].[Dev_L_USER_MST].[dbo].[lum_view_departments_duplicated] AS department\r\n\t\t\t\tON evaluation_commitee_department.department_code_lvl04  =department.department_code_lvl00\r\n\t\t\tINNER JOIN\r\n\t\t\t\tM_evaluation_commitees AS evaluation_commitee\r\n\t\t\t\tON evaluation_commitee_department.evaluation_commitee_id = evaluation_commitee.evaluation_commitee_id\r\n\t\t) AS assigned_department\r\n\t\tON CASE --評価部会の部署の階層が異なるのでCASE式で分岐\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 1 THEN  department.department_code_lvl01\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 2 THEN  department.department_code_lvl02\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 3 THEN  department.department_code_lvl03\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 4 THEN  department.department_code_lvl04\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 5 THEN  department.department_code_lvl05\r\n\t\t\tWHEN assigned_department.level_no_lvl00 = 6 THEN  department.department_code_lvl06\r\n\t\tEND\t= assigned_department.department_code_lvl00\r\n\t) AS department\r\nGROUP BY department_code_lvl00\r\n","SourceTableName":"V_ManagementEvaluationCommiteeDepartmentRelations","SourceTableSchema":"dbo","DataBaseType":1,"ViewInfo":{"ViewName":"V_ManagementEvaluationCommiteeDepartmentRelations","IsUpdatable":true,"QueryColumns":["department_code_lvl00"]},"UserSetQueryColumns":["department_code_lvl00"]},"Name":"V_ManagementEvaluationCommiteeDepartmentRelations","Relations":[]}